{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/MERN Projects/MERN-Chat/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport RoomList from './components/RoomList';\nimport UserList from './components/UserList';\nimport MessageList from './components/MessageList';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [authPage, setAuthPage] = useState('login');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [rooms, setRooms] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [selectedRoom, setSelectedRoom] = useState(null);\n  const [loadingRooms, setLoadingRooms] = useState(false);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [messageInput, setMessageInput] = useState(\"\");\n  const [sending, setSending] = useState(false);\n  const socketRef = useRef(null);\n\n  // Persist login\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    const savedToken = localStorage.getItem('token');\n    if (savedUser && savedToken) {\n      setUser(JSON.parse(savedUser));\n      setToken(savedToken);\n    }\n  }, []);\n\n  // Connect/disconnect socket on login/logout\n  useEffect(() => {\n    if (!token) return;\n    socketRef.current = io('http://localhost:5001', {\n      auth: {\n        token\n      },\n      autoConnect: true\n    });\n    return () => {\n      var _socketRef$current;\n      (_socketRef$current = socketRef.current) === null || _socketRef$current === void 0 ? void 0 : _socketRef$current.disconnect();\n    };\n  }, [token]);\n\n  // Join/leave room on selection\n  useEffect(() => {\n    if (!socketRef.current || !selectedRoom) return;\n    socketRef.current.emit('joinRoom', selectedRoom);\n    return () => {\n      if (selectedRoom) socketRef.current.emit('leaveRoom', selectedRoom);\n    };\n  }, [selectedRoom]);\n\n  // Listen for new messages\n  useEffect(() => {\n    if (!socketRef.current || !selectedRoom) return;\n    const handler = msg => {\n      // Only add messages for the current room\n      if (msg.room === selectedRoom || msg.room._id === selectedRoom) {\n        setMessages(prev => [...prev, msg]);\n      }\n    };\n    socketRef.current.on('newMessage', handler);\n    return () => {\n      socketRef.current.off('newMessage', handler);\n    };\n  }, [selectedRoom]);\n\n  // Fetch rooms and users after login\n  useEffect(() => {\n    if (!token) return;\n    setLoadingRooms(true);\n    setLoadingUsers(true);\n    axios.get('/api/rooms', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setRooms(res.data);\n      if (res.data.length > 0) setSelectedRoom(res.data[0]._id);\n    }).finally(() => setLoadingRooms(false));\n    axios.get('/api/users', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => setUsers(res.data)).finally(() => setLoadingUsers(false));\n  }, [token]);\n\n  // Fetch messages when selectedRoom changes\n  useEffect(() => {\n    if (!token || !selectedRoom) return;\n    setLoadingMessages(true);\n    axios.get(`/api/messages/${selectedRoom}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => setMessages(res.data)).finally(() => setLoadingMessages(false));\n  }, [token, selectedRoom]);\n  const handleLogin = (user, token) => {\n    setUser(user);\n    setToken(token);\n    localStorage.setItem('user', JSON.stringify(user));\n    localStorage.setItem('token', token);\n  };\n  const handleLogout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n  };\n  const handleSelectRoom = roomId => {\n    setSelectedRoom(roomId);\n  };\n  const handleDirectChat = async userId => {\n    // Create or get direct room\n    try {\n      const res = await axios.post('/api/rooms/direct', {\n        userId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!rooms.find(r => r._id === res.data._id)) {\n        setRooms(prev => [...prev, res.data]);\n      }\n      setSelectedRoom(res.data._id);\n    } catch (err) {\n      // handle error\n    }\n  };\n\n  // Send message via socket and API\n  const handleSendMessage = e => {\n    e.preventDefault();\n    if (!messageInput.trim() || !selectedRoom) return;\n    setSending(true);\n    socketRef.current.emit('sendMessage', {\n      roomId: selectedRoom,\n      content: messageInput\n    });\n    setMessageInput('');\n    setSending(false);\n  };\n  if (!user) {\n    return authPage === 'login' ? /*#__PURE__*/_jsxDEV(Login, {\n      onSwitch: () => setAuthPage('register'),\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(Register, {\n      onSwitch: () => setAuthPage('login'),\n      onRegister: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-100 to-purple-200 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-4xl bg-white rounded-xl shadow-lg p-8 flex flex-col md:flex-row gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"w-full md:w-1/3 border-r border-gray-200 pr-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-purple-700 mb-2\",\n            children: \"Chat Rooms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), loadingRooms ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(RoomList, {\n            rooms: rooms,\n            selectedRoom: selectedRoom,\n            onSelectRoom: handleSelectRoom\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-blue-700 mb-2\",\n            children: \"Users\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), loadingUsers ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(UserList, {\n            users: users,\n            onDirectChat: handleDirectChat,\n            currentUserId: user.id || user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-extrabold text-gray-800\",\n            children: \"MERN Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"text-sm text-red-500 hover:underline\",\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 bg-gray-50 rounded-lg p-4 mb-4 overflow-y-auto\",\n          children: loadingMessages ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-400 text-center\",\n            children: \"Loading messages...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(MessageList, {\n            messages: messages,\n            currentUserId: user.id || user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"flex gap-2\",\n          onSubmit: handleSendMessage,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"flex-1 rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\",\n            placeholder: \"Type your message...\",\n            value: messageInput,\n            onChange: e => setMessageInput(e.target.value),\n            disabled: sending || !selectedRoom\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition\",\n            disabled: sending || !selectedRoom || !messageInput.trim(),\n            type: \"submit\",\n            children: sending ? 'Sending...' : 'Send'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"YAl66QIGLbwuXguF6tmSrt3Ln40=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Login","Register","RoomList","UserList","MessageList","io","jsxDEV","_jsxDEV","App","_s","authPage","setAuthPage","user","setUser","token","setToken","rooms","setRooms","users","setUsers","selectedRoom","setSelectedRoom","loadingRooms","setLoadingRooms","loadingUsers","setLoadingUsers","messages","setMessages","loadingMessages","setLoadingMessages","messageInput","setMessageInput","sending","setSending","socketRef","savedUser","localStorage","getItem","savedToken","JSON","parse","current","auth","autoConnect","_socketRef$current","disconnect","emit","handler","msg","room","_id","prev","on","off","get","headers","Authorization","then","res","data","length","finally","handleLogin","setItem","stringify","handleLogout","removeItem","handleSelectRoom","roomId","handleDirectChat","userId","post","find","r","err","handleSendMessage","e","preventDefault","trim","content","onSwitch","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","onRegister","className","children","onSelectRoom","onDirectChat","currentUserId","id","onClick","onSubmit","placeholder","value","onChange","target","disabled","type","_c","$RefreshReg$"],"sources":["/Users/apple/Desktop/MERN Projects/MERN-Chat/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport RoomList from './components/RoomList';\nimport UserList from './components/UserList';\nimport MessageList from './components/MessageList';\nimport { io } from 'socket.io-client';\n\nfunction App() {\n  const [authPage, setAuthPage] = useState('login');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [rooms, setRooms] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [selectedRoom, setSelectedRoom] = useState(null);\n  const [loadingRooms, setLoadingRooms] = useState(false);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [messageInput, setMessageInput] = useState(\"\");\n  const [sending, setSending] = useState(false);\n  const socketRef = useRef(null);\n\n  // Persist login\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    const savedToken = localStorage.getItem('token');\n    if (savedUser && savedToken) {\n      setUser(JSON.parse(savedUser));\n      setToken(savedToken);\n    }\n  }, []);\n\n  // Connect/disconnect socket on login/logout\n  useEffect(() => {\n    if (!token) return;\n    socketRef.current = io('http://localhost:5001', {\n      auth: { token },\n      autoConnect: true,\n    });\n    return () => {\n      socketRef.current?.disconnect();\n    };\n  }, [token]);\n\n  // Join/leave room on selection\n  useEffect(() => {\n    if (!socketRef.current || !selectedRoom) return;\n    socketRef.current.emit('joinRoom', selectedRoom);\n    return () => {\n      if (selectedRoom) socketRef.current.emit('leaveRoom', selectedRoom);\n    };\n  }, [selectedRoom]);\n\n  // Listen for new messages\n  useEffect(() => {\n    if (!socketRef.current || !selectedRoom) return;\n    const handler = (msg) => {\n      // Only add messages for the current room\n      if (msg.room === selectedRoom || msg.room._id === selectedRoom) {\n        setMessages((prev) => [...prev, msg]);\n      }\n    };\n    socketRef.current.on('newMessage', handler);\n    return () => {\n      socketRef.current.off('newMessage', handler);\n    };\n  }, [selectedRoom]);\n\n  // Fetch rooms and users after login\n  useEffect(() => {\n    if (!token) return;\n    setLoadingRooms(true);\n    setLoadingUsers(true);\n    axios.get('/api/rooms', { headers: { Authorization: `Bearer ${token}` } })\n      .then(res => {\n        setRooms(res.data);\n        if (res.data.length > 0) setSelectedRoom(res.data[0]._id);\n      })\n      .finally(() => setLoadingRooms(false));\n    axios.get('/api/users', { headers: { Authorization: `Bearer ${token}` } })\n      .then(res => setUsers(res.data))\n      .finally(() => setLoadingUsers(false));\n  }, [token]);\n\n  // Fetch messages when selectedRoom changes\n  useEffect(() => {\n    if (!token || !selectedRoom) return;\n    setLoadingMessages(true);\n    axios.get(`/api/messages/${selectedRoom}`, { headers: { Authorization: `Bearer ${token}` } })\n      .then(res => setMessages(res.data))\n      .finally(() => setLoadingMessages(false));\n  }, [token, selectedRoom]);\n\n  const handleLogin = (user, token) => {\n    setUser(user);\n    setToken(token);\n    localStorage.setItem('user', JSON.stringify(user));\n    localStorage.setItem('token', token);\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n  };\n\n  const handleSelectRoom = (roomId) => {\n    setSelectedRoom(roomId);\n  };\n\n  const handleDirectChat = async (userId) => {\n    // Create or get direct room\n    try {\n      const res = await axios.post('/api/rooms/direct', { userId }, { headers: { Authorization: `Bearer ${token}` } });\n      if (!rooms.find(r => r._id === res.data._id)) {\n        setRooms(prev => [...prev, res.data]);\n      }\n      setSelectedRoom(res.data._id);\n    } catch (err) {\n      // handle error\n    }\n  };\n\n  // Send message via socket and API\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    if (!messageInput.trim() || !selectedRoom) return;\n    setSending(true);\n    socketRef.current.emit('sendMessage', { roomId: selectedRoom, content: messageInput });\n    setMessageInput('');\n    setSending(false);\n  };\n\n  if (!user) {\n    return authPage === 'login' ? (\n      <Login onSwitch={() => setAuthPage('register')} onLogin={handleLogin} />\n    ) : (\n      <Register onSwitch={() => setAuthPage('login')} onRegister={handleLogin} />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-100 to-purple-200 flex items-center justify-center\">\n      <div className=\"w-full max-w-4xl bg-white rounded-xl shadow-lg p-8 flex flex-col md:flex-row gap-8\">\n        {/* Sidebar for user list and rooms */}\n        <aside className=\"w-full md:w-1/3 border-r border-gray-200 pr-4\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-purple-700 mb-2\">Chat Rooms</h2>\n            {loadingRooms ? <div className=\"text-gray-400\">Loading...</div> :\n              <RoomList rooms={rooms} selectedRoom={selectedRoom} onSelectRoom={handleSelectRoom} />}\n          </div>\n          <div>\n            <h2 className=\"text-2xl font-bold text-blue-700 mb-2\">Users</h2>\n            {loadingUsers ? <div className=\"text-gray-400\">Loading...</div> :\n              <UserList users={users} onDirectChat={handleDirectChat} currentUserId={user.id || user._id} />}\n          </div>\n        </aside>\n        {/* Main chat area */}\n        <main className=\"flex-1 flex flex-col\">\n          <div className=\"mb-4 flex justify-between items-center\">\n            <h1 className=\"text-3xl font-extrabold text-gray-800\">MERN Chat</h1>\n            <button className=\"text-sm text-red-500 hover:underline\" onClick={handleLogout}>Logout</button>\n          </div>\n          <div className=\"flex-1 bg-gray-50 rounded-lg p-4 mb-4 overflow-y-auto\">\n            {loadingMessages ? (\n              <div className=\"text-gray-400 text-center\">Loading messages...</div>\n            ) : (\n              <MessageList messages={messages} currentUserId={user.id || user._id} />\n            )}\n          </div>\n          <form className=\"flex gap-2\" onSubmit={handleSendMessage}>\n            <input\n              className=\"flex-1 rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\"\n              placeholder=\"Type your message...\"\n              value={messageInput}\n              onChange={e => setMessageInput(e.target.value)}\n              disabled={sending || !selectedRoom}\n            />\n            <button\n              className=\"bg-purple-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-purple-700 transition\"\n              disabled={sending || !selectedRoom || !messageInput.trim()}\n              type=\"submit\"\n            >\n              {sending ? 'Sending...' : 'Send'}\n            </button>\n          </form>\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}